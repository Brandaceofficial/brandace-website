<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="images/Titlebar.png"/>
  <title>Brandace Admin Dashboard</title>
  <!-- Notiflix CDN -->
<script src="https://cdn.jsdelivr.net/npm/notiflix@3.2.6/dist/notiflix-aio-3.2.6.min.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f4f6f8;
      margin: 0;
      padding: 2rem;
      color: #333;
    }

    h1 {
      text-align: center;
      margin-bottom: 2rem;
      color: #2c3e50;
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 1rem;
      max-width: 400px;
      margin: 0 auto 3rem auto;
      background: #fff;
      padding: 2rem;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);
    }

    input[type="text"],
    input[type="file"] {
      padding: 0.75rem;
      border: 1px solid #ccc;
      border-radius: 4px;
      font-size: 1rem;
    }

    button {
      padding: 0.75rem;
      background-color: #0078d4;
      color: white;
      border: none;
      border-radius: 4px;
      font-size: 1rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }

    button:hover {
      background-color: #005fa3;
    }

    .logo-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
      gap: 1.5rem;
      padding: 1rem;
    }

    .logo-card {
      background: #fff;
      padding: 1rem;
      border-radius: 8px;
      text-align: center;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
    }

    .logo-card img {
      max-width: 100px;
      max-height: 100px;
      margin-bottom: 0.5rem;
    }

    .logo-card p {
      margin: 0.5rem 0;
      font-weight: bold;
    }

    .logo-card form {
      margin-top: 0.5rem;
    }

    .logo-card button {
      background-color: #e74c3c;
    }

    .logo-card button:hover {
      background-color: #c0392b;
    }

    
    .upload-section {
  background: #fff;
  padding: 2rem;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  max-width: 600px;
  margin: 2rem auto;
}

.upload-section h2 {
  text-align: center;
  margin-bottom: 1.5rem;
  font-size: 1.8rem;
  color: #111;
}

.upload-form {
  display: flex;
  flex-direction: column;
  gap: 1.2rem;
}

.form-group {
  display: flex;
  flex-direction: column;
}

.form-group label {
  font-weight: 600;
  margin-bottom: 0.5rem;
  color: #333;
}

.form-group input,
.form-group textarea,
.form-group select {
  padding: 0.8rem;
  border: 1px solid #ccc;
  border-radius: 6px;
  font-size: 1rem;
  background: #f9f9f9;
}

.upload-btn {
  padding: 1rem;
  background-color: #111;
  color: #fff;
  border: none;
  border-radius: 6px;
  font-size: 1rem;
  cursor: pointer;
  transition: background 0.3s ease;
}

.upload-btn:hover {
  background-color: #333;
}

.work-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 2rem;
  padding: 2rem;
}

.work-card {
  background: #fff;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  overflow: hidden;
  transition: transform 0.3s ease;
  padding-bottom: 1rem;
}

.work-card:hover {
  transform: translateY(-5px);
}

.work-card img {
  width: 100%;
  height: 180px;
  object-fit: cover;
  border-top-left-radius: 10px;
  border-top-right-radius: 10px;
}

.work-card h3 {
  margin: 1rem;
  font-size: 1.2rem;
  color: #111;
}

.work-card p {
  margin: 0 1rem;
  font-size: 0.95rem;
  color: #555;
}

.work-card small {
  display: block;
  margin: 0.5rem 1rem;
  font-size: 0.85rem;
  color: #888;
}

.work-card form {
  margin: 1rem;
}

.work-card button {
  background-color: #e63946;
  color: #fff;
  border: none;
  padding: 0.6rem 1rem;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.9rem;
  transition: background 0.3s ease;
}

.work-card button:hover {
  background-color: #c92a3b;
}
  </style>
</head>
<body>
  <h1>Brandace Client Logo Manager</h1>

  <form action="/upload-logo" method="POST" enctype="multipart/form-data">
    <input type="text" name="name" placeholder="Client Name" required />
    <input type="file" id="imageInput" name="logo" accept="image/*" required />
    <div id="previewContainer">
    <img id="imagePreview" src="" alt="Image Preview" style="display:none; max-width: 300px; margin-top: 1rem;" />
  </div>
    <button type="submit">Upload Logo</button>
  </form>

  <div class="logo-grid">
    <% logos.forEach(logo => { %>
      <div class="logo-card">
        <img src="<%= logo.imageUrl %>" alt="<%= logo.name %>" />
        <p><%= logo.name %></p>
        <form action="/delete-logo/<%= logo._id %>" method="POST">
          <button type="submit">Delete</button>
        </form>
      </div>
    <% }) %>
  </div>

  <section class="upload-section">
  <h2>Upload Work Item</h2>
  <form action="/upload-work" method="POST" enctype="multipart/form-data" class="upload-form">
    <div class="form-group">
      <label for="title">Project Title</label>
      <input type="text" name="title" id="title" required />
    </div>

    <div class="form-group">
      <label for="description">Short Description</label>
      <textarea name="description" id="description" rows="3" required></textarea>
    </div>

    <div class="form-group">
      <label for="category">Category</label>
      <select name="category" id="category" required>
        <option value="">Select Category</option>
        <option value="Branding">Branding</option>
        <option value="Web Design">Web Design</option>
        <option value="Mobile App">Mobile App</option>
        <option value="Graphic Design">Graphic Design</option>
        <option value="Motion Graphics">Motion Graphics</option>
      </select>
    </div>

    <div class="form-group">
      <label for="image">Upload Image</label>
      <input type="file" name="image" id="image" accept="image/*" required />
    </div>
    <div id="previewContainer">
    <img id="imagePreview2" src="" alt="Image Preview" style="display: none; max-width: 300px; margin-top: 1rem;" />
  </div>
    <button type="submit" class="upload-btn">Upload Work</button>
  </form>
</section>

<h2>Uploaded Work Items</h2>
<div class="work-grid">
  <% workItems.forEach(item => { %>
    <div class="work-card">
      <img src="<%= item.imageUrl %>" alt="<%= item.title %>" />
      <h3><%= item.title %></h3>
      <p><%= item.description %></p>
      <small><%= item.category %></small>
      <form action="/delete-work/<%= item._id %>" method="POST">
        <button type="submit">Delete</button>
      </form>
    </div>
  <% }) %>
</div>

<script>
document.getElementById('imageInput').addEventListener('change', function (e) {
    const file = e.target.files[0];
    const preview = document.getElementById('imagePreview');

    if (file) {
      const reader = new FileReader();
      reader.onload = function (event) {
        preview.src = event.target.result;
        preview.style.display = 'block';
      };
      reader.readAsDataURL(file);
    } else {
      preview.src = '';
      preview.style.display = 'none';
    }
  });

  document.getElementById('image').addEventListener('change', function (e) {
    const file = e.target.files[0];
    const preview = document.getElementById('imagePreview2');

    if (file) {
      const reader = new FileReader();
      reader.onload = function (event) {
        preview.src = event.target.result;
        preview.style.display = 'block';
      };
      reader.readAsDataURL(file);
    } else {
      preview.src = '';
      preview.style.display = 'none';
    }
  });


  const form = document.querySelector('.upload-form');

  form.addEventListener('submit', function (e) {
    Notiflix.Loading.standard('Uploading...');
  });

  // Optional: show success or error after redirect
  const urlParams = new URLSearchParams(window.location.search);
  if (urlParams.get('upload') === 'success') {
    Notiflix.Loading.remove();
    Notiflix.Notify.success('Work item uploaded successfully!');
  } else if (urlParams.get('upload') === 'fail') {
    Notiflix.Loading.remove();
    Notiflix.Notify.failure('Upload failed. Please try again.');
  }
</script>
</body>
</html>